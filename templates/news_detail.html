<!--  наследуемся от шаблона default.html, который мы создавали ещё во времена flatpages -->
{% extends 'flatpages/default.html' %}

{% load account %}

{% load custom_filters %} <!-- не забываем заранее загружать наши фильтры! -->

<!-- Название у нас будет news -->
{% block title %}
News
{% endblock title %}

<!-- В контенте на странице мы выводим сама новость, айди которой было передано в адрес -->
{% block content %}
<br>
<br>
<h3>{{ news_detail.title|censor }}</h3>
<br>
<br>
<container>
<div class="row justify-content-between">
<div class="h6 col-6 text-left">{{ news_detail.date_posted|date:'d-M-Y' }} {{ news_detail.date_posted|time:"H:i" }}</div>
<div class="h6 col-6 text-right"> Категории:
    {% for c in news_detail.category.all %}
        {% if c in user.category_set.all %}
            <a href="unsubscribe/{{ c.id }}" class="btn btn-danger btn-sm"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bell" viewBox="0 0 16 16">
      <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
    </svg></a>  {{ c.name }}
    {% else %}
            <a href="subscribe/{{ c.id }}" class="btn btn-success btn-sm"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bell" viewBox="0 0 16 16">
      <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
    </svg></a>  {{ c.name }}
    {% endif %}
    {% endfor %}
</div>
</div>
<div class="row justify-content-end">
    <div class="col-1"><a href="plusrating/{{ news_detail.id }}" class="btn btn-sm"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet" viewBox="0 0 640 640" width="30" height="30"><defs><path d="M456.72 218.95C456.72 199.35 449.5 182.32 435.04 167.84C420.57 153.38 403.44 146.15 383.65 146.15C378.63 146.15 338.44 146.15 333.41 146.15C342.55 127.31 347.12 109.04 347.12 91.35C347.12 69.08 343.78 51.38 337.13 38.25C330.46 25.12 320.76 15.46 308.01 9.27C295.25 3.09 280.89 0 264.9 0C255.19 0 246.63 3.52 239.21 10.56C231.03 18.56 225.13 28.83 221.52 41.39C217.9 53.95 215 65.99 212.81 77.5C210.62 89.02 207.24 97.15 202.68 101.91C193.35 111.99 183.17 124.18 172.13 138.45C152.91 163.37 139.88 178.12 133.03 182.69C125.21 182.69 62.64 182.69 54.82 182.69C44.73 182.69 36.12 186.27 28.98 193.4C21.85 200.53 18.28 209.15 18.28 219.23C18.28 237.5 18.28 383.65 18.28 401.92C18.28 412 21.84 420.61 28.98 427.75C36.12 434.89 44.73 438.46 54.82 438.46C63.04 438.46 128.8 438.46 137.02 438.46C141.21 438.46 154.34 442.26 176.41 449.88C199.82 458.06 220.42 464.29 238.21 468.57C256 472.86 274.03 475 292.31 475C294.07 475 302.92 475 318.84 475C325.01 475 328.44 475 329.13 475C355.96 475 377.55 467.34 393.92 452.01C410.28 436.69 418.37 415.81 418.19 389.36C429.6 374.7 435.31 357.77 435.31 338.55C435.31 334.37 435.03 330.27 434.46 326.27C441.69 313.53 445.31 299.83 445.31 285.17C445.31 278.32 444.45 271.75 442.74 265.48C452.06 251.39 456.72 235.88 456.72 218.95ZM73.09 401.92C68.14 401.92 63.86 400.11 60.24 396.5C56.63 392.89 54.82 388.6 54.82 383.65C54.82 378.7 56.62 374.42 60.24 370.81C63.86 367.19 68.14 365.38 73.09 365.38C78.03 365.38 82.32 367.19 85.93 370.81C89.55 374.42 91.36 378.7 91.36 383.65C91.36 388.6 89.55 392.89 85.93 396.5C82.32 400.11 78.03 401.92 73.09 401.92ZM398.79 255.78C401.64 259.02 404.02 263.54 405.92 269.34C407.83 275.15 408.77 280.42 408.77 285.18C408.77 298.31 403.73 309.63 393.65 319.15C397.08 325.23 398.79 331.8 398.79 338.84C398.79 345.88 397.12 352.87 393.79 359.82C390.47 366.76 385.94 371.75 380.24 374.8C381.19 380.51 381.66 385.84 381.66 390.78C381.66 422.56 363.39 438.45 326.85 438.45C323.39 438.45 295.77 438.45 292.32 438.45C267.38 438.45 234.85 431.51 194.69 417.61C193.74 417.23 190.98 416.23 186.41 414.62C181.84 413 178.47 411.81 176.28 411.05C174.09 410.29 170.76 409.19 166.28 407.77C161.81 406.34 158.2 405.29 155.44 404.63C152.68 403.96 149.54 403.34 146.02 402.77C142.5 402.2 139.5 401.92 137.03 401.92C136.42 401.92 133.38 401.92 127.9 401.92L127.9 219.24C133.38 219.24 136.42 219.24 137.03 219.24C140.07 219.24 143.45 218.38 147.16 216.67C150.87 214.96 154.68 212.39 158.58 208.96C162.48 205.54 166.14 202.16 169.57 198.83C173 195.5 176.8 191.31 180.99 186.27C185.18 181.23 188.46 177.18 190.84 174.14C193.22 171.09 196.21 167.19 199.83 162.43C203.44 157.68 205.63 154.82 206.39 153.87C216.86 140.93 224.19 132.27 228.37 127.89C236.17 119.71 241.84 109.3 245.36 96.64C248.88 83.98 251.78 72.04 254.06 60.82C256.34 49.59 259.96 41.5 264.91 36.55C283.18 36.55 295.36 41.02 301.45 49.97C307.53 58.91 310.58 72.71 310.58 91.36C310.58 102.58 306.01 117.85 296.87 137.17C287.74 156.48 283.18 171.66 283.18 182.7C293.22 182.7 373.6 182.7 383.65 182.7C393.18 182.7 401.64 186.36 409.06 193.69C416.48 201.01 420.2 209.53 420.2 219.24C420.2 225.9 418.15 233.6 414.06 242.37C409.97 251.12 404.87 255.59 398.79 255.78Z" id="n1kVYT6Lx8"></path></defs><g><g><g><use xlink:href="#n1kVYT6Lx8" opacity="1" fill="#28a745" fill-opacity="1"></use><g><use xlink:href="#n1kVYT6Lx8" opacity="1" fill-opacity="0" stroke="#000000" stroke-width="1" stroke-opacity="0"></use></g></g></g></g></svg></a></div>
    <div class="col-1"><a href="minusrating/{{ news_detail.id }}" class="btn btn-sm"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet" viewBox="0 0 640 640" width="30" height="30"><defs><path d="M445.31 189.82C445.31 175.17 441.69 161.47 434.46 148.72C435.02 144.72 435.31 140.63 435.31 136.45C435.31 117.23 429.6 100.29 418.18 85.64C418.18 85.49 418.18 84.35 418.18 84.21C418.37 58.14 410.24 37.59 393.77 22.55C377.31 7.52 355.76 0 329.12 0C325.93 0 300.35 0 297.15 0C277.17 0 258.14 2.09 240.06 6.28C221.98 10.47 200.76 16.74 176.41 25.12C154.33 32.73 141.2 36.54 137.02 36.54C128.79 36.54 63.03 36.54 54.81 36.54C44.72 36.54 36.11 40.1 28.98 47.24C21.84 54.38 18.27 62.99 18.27 73.07C18.27 91.34 18.27 237.49 18.27 255.76C18.27 265.85 21.84 274.46 28.98 281.6C36.12 288.73 44.72 292.3 54.81 292.3C62.63 292.3 125.2 292.3 133.02 292.3C139.87 296.87 152.91 311.62 172.13 336.54C183.36 351.2 193.54 363.28 202.67 372.8C206.29 376.8 209.24 382.89 211.52 391.07C213.8 399.25 215.47 407.3 216.52 415.19C217.56 423.09 219.99 431.7 223.8 441.02C227.6 450.35 232.74 458.16 239.21 464.44C246.63 471.48 255.19 475 264.9 475C280.89 475 295.26 471.91 308 465.73C320.76 459.54 330.46 449.89 337.12 436.75C343.79 423.81 347.12 406.11 347.12 383.66C347.12 365.96 342.55 347.69 333.42 328.85C338.44 328.85 378.63 328.85 383.65 328.85C403.45 328.85 420.57 321.62 435.04 307.16C449.5 292.7 456.73 275.66 456.73 256.06C456.72 239.12 452.06 223.61 442.74 209.52C444.45 203.24 445.31 196.68 445.31 189.82ZM73.08 109.62C68.13 109.62 63.85 107.82 60.23 104.2C56.62 100.58 54.81 96.3 54.81 91.35C54.81 86.4 56.62 82.12 60.23 78.51C63.85 74.89 68.13 73.08 73.08 73.08C78.03 73.08 82.31 74.89 85.93 78.51C89.54 82.12 91.35 86.4 91.35 91.35C91.35 96.3 89.54 100.58 85.93 104.2C82.31 107.81 78.03 109.62 73.08 109.62ZM383.65 292.31C373.6 292.31 293.22 292.31 283.17 292.31C283.17 303.35 287.74 318.52 296.87 337.84C306 357.16 310.57 372.43 310.57 383.66C310.57 402.3 307.53 416.1 301.44 425.05C295.35 433.99 283.17 438.47 264.9 438.47C259.95 433.52 256.33 425.42 254.05 414.19C251.78 402.97 248.87 391.03 245.35 378.37C241.83 365.72 236.17 355.3 228.37 347.11C224.18 342.74 216.85 334.08 206.39 321.14C205.63 320.18 203.44 317.33 199.82 312.58C196.21 307.82 193.21 303.92 190.83 300.87C188.45 297.83 185.17 293.79 180.98 288.74C176.8 283.7 172.99 279.51 169.56 276.18C166.14 272.85 162.48 269.47 158.57 266.04C154.67 262.62 150.87 260.05 147.16 258.34C143.45 256.63 140.07 255.77 137.02 255.77C136.41 255.77 133.37 255.77 127.89 255.77L127.89 73.08C133.37 73.08 136.41 73.08 137.02 73.08C139.5 73.08 142.49 72.8 146.01 72.22C149.53 71.65 152.67 71.03 155.43 70.37C158.19 69.7 161.81 68.65 166.28 67.23C170.75 65.8 174.08 64.71 176.27 63.94C178.46 63.18 181.84 61.99 186.41 60.37C190.98 58.76 193.73 57.76 194.68 57.38C234.84 43.49 267.38 36.54 292.31 36.54C295.97 36.54 325.19 36.54 328.85 36.54C345.41 36.54 358.35 40.44 367.67 48.25C376.99 56.05 381.66 68.04 381.66 84.21C381.66 89.16 381.18 94.49 380.23 100.2C385.94 103.24 390.46 108.24 393.79 115.18C397.12 122.13 398.78 129.12 398.78 136.16C398.78 143.2 397.07 149.77 393.64 155.86C403.73 165.37 408.77 176.69 408.77 189.83C408.77 194.59 407.82 199.86 405.92 205.67C404.02 211.48 401.64 216 398.78 219.23C404.87 219.42 409.96 223.89 414.06 232.65C418.15 241.4 420.19 249.11 420.19 255.77C420.2 265.47 416.48 273.99 409.06 281.32C401.64 288.65 393.17 292.31 383.65 292.31Z" id="b7zMrINaKF"></path></defs><g><g><g><use xlink:href="#b7zMrINaKF" opacity="1" fill="#dc3545" fill-opacity="1"></use><g><use xlink:href="#b7zMrINaKF" opacity="1" fill-opacity="0" stroke="#000000" stroke-width="1" stroke-opacity="0"></use></g></g></g></g></svg></a></div>
    {% if news_detail.rating >= 0 %}
    <div><p class="col-1 text-success">{{ news_detail.rating }}</p></div>
    {% else %}
    <div><p class="col-1 text-danger">{{ news_detail.rating }}</p></div>
    {% endif %}
</div>
<hr>
<div class="row justify-content-between">
    <div class="col-12 text-justify">{{ news_detail.text|censor }}</div>
</div>
<br>
<div class="row justify-content-between">
    <div class="col-6"></div>
    <div class="col-6 text-right font-weight-bold">Автор: {{ news_detail.author.name }}</div>
</div>

<!-- подключаем комментарии -->
{% load comment_tags %}
{% render_comments news_detail request %}
{% include_bootstrap %}

</container>
{% endblock content %}